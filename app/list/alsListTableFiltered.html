<!--(C) Ask Learn Share Ltd:-->

<style type="text/css">
    td,
    th {
        padding: .2em
    }

    .hex,
    .hex span {
        text-align: center;
        font-size: 80%;
    }

    .eighty {
        width: 400px;
    }
</style>

<md-card layout-padding>

    <div layout="column" ng-switch="table.type">

        <div ng-switch-when="editable" layout="column" class="eighty" ng-init="active=table.records; bin=[]; e = {'name': '','expression': '','open': true,'test': 'test'};">
            <div layout="row" layout-align="center center">
                <md-checkbox ng-model="showJSON">Show JSON</md-checkbox>

                <span flex></span>
                <md-button arria-label="" class="md-raised">
                    import
                </md-button>
                <md-button aria-label="" class="md-raised">
                    export
                </md-button>
            </div>

            <md-card layout-padding>
                <div layout="row" layout-align="space-between center">
                    <h4 class="md-title">Active</h4>
                    <!-- track by in ng-repeat to keep collection up-to-date -->
                    <md-button arria-label="" class="md-fab md-mini md-primary" ng-click="active.unshift(e);">
                        <md-icon>
                            <i class="material-icons">add</i>
                        </md-icon>
                    </md-button>
                </div>
                <div layout="row" ng-repeat="(k,v) in active track by $index">

                    <div flex="15">
                        <span ng-if="!v.open">{{v.name}}</span>
                        <form ng-if="v.open">
                            <input ng-model="v.name" size="3" placeholder="name">
                        </form>
                    </div>

                    <div flex ng-title="{{eval(v.expression)}}" title "to be fixed">
                        <span ng-if="!v.open">{{v.expression}}</span>
                        <form ng-if="v.open">
                            <input ng-model="v.expression" size="18" placeholder="expression">
                        </form>
                    </div>

                    <div flex="40" layout="row" layout-align="end">

                        <!-- Edit -->
                        <md-button arria-label="" title="edit" class="md-icon-button" ng-click="v.open=!v.open">
                            <als-icon-pair data-toggle="v.open" data-icon1="'edit'" data-icon2="'check'"></als-icon-pair>
                        </md-button>

                        <!-- Bin -->
                        <md-button arria-label="" title="bin" class="md-icon-button" ng-click="bin.unshift(active[$index]); active.splice($index, 1);">
                            <md-icon>
                                <i class="material-icons">delete</i>
                            </md-icon>
                        </md-button>

                    </div>
                </div>
            </md-card>

            <md-card layout-padding>
                <h4 class="md-title">Bin</h4>
                <div layout="row" ng-repeat="(k,v) in bin track by $index">
                    <div flex="15">
                        <span>{{v.name}}</span>
                    </div>
                    <div flex ng-title="{{eval(v.expression)}}" title "to be fixed">
                        <span>{{v.expression}}</span>
                    </div>
                    <div flex="40" layout="row" layout-align="end">

                        <!-- Restore -->
                        <md-button arria-label="" title="restore" class="md-icon-button" ng-click="active.unshift(bin[$index]); bin.splice($index, 1);">
                            <md-icon>
                                <i class="material-icons">restore</i>
                            </md-icon>
                        </md-button>

                        <!-- Delete forever-->
                        <md-button arria-label="" title="delete forever" class="md-icon-button" ng-click="bin.splice($index, 1);">
                            <md-icon>
                                <i class="material-icons">delete_forever</i>
                            </md-icon>
                        </md-button>

                    </div>
                </div>
            </md-card>

            <div ng-show="showJSON" layout-padding layout="column" layout-align="center center">
                <h4 class="md-title">Active</h4>
                <pre>{{active | json}}</pre>
                <h4 class="md-title">Bin</h4>
                <pre>{{bin | json}}</pre>
            </div>
        </div>

        <table ng-switch-when="basic">
            <thead>
                <tr>
                    <th ng-repeat="h in table.filter">
                        <span>{{h}}</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="r in table.records">
                    <td ng-repeat="h in table.filter">
                        <span>{{r[h]}}yy</span>
                    </td>
                </tr>
            </tbody>
        </table>


        <table ng-switch-default>
            <thead>
                <tr>
                    <th ng-repeat="h in table.filter">
                        <span ng-if="h!='icon'">{{h}}</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="r in table.records">
                    <td ng-repeat="h in table.filter" ng-switch="h" class="center">

                        <span ng-switch-when="hex" layout="row" layout-align="center center" class="hex">

                          <span flex="25">{{r[h]}}</span>

                        <span style="background: #{{r[h]}}; font-size: 100%" flex="20">
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          </span>

                        <span flex="10">
                          &nbsp;
                          </span>

                        <span style="background: #fbe88b; font-size: 100%" flex="20">
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          </span>

                        <span flex="25">fbe88b</span>

                        </span>

                        <span ng-switch-when="icon">
                          <md-icon>
                            <i class="material-icons">{{r[h]}}</i>
                          </md-icon>
                        </span>

                        <span ng-switch-default>{{r[h]}}</span>

                    </td>
                </tr>
            </tbody>
        </table>
        <p class="md-caption" ng-if="table.caption">{{table.caption}}</p>
    </div>
</md-card>
